LANGUAGES   += c++
COMPILEOPTS += -std=c++14
COMPILEOPTS += -Wall
COMPILEOPTS += -Wextra
COMPILEOPTS += -Werror

LANGUAGES   += c++
COMPILEOPTS += -Wno-unused-private-field
COMPILEOPTS += -Wno-unused-parameter

LANGUAGES   += bash

LANGUAGES   += h

LANGUAGES   += c++
COMPILEOPTS += -Isrc

LANGUAGES   += c++
COMPILEOPTS += `ppkg-config tclap --cflags`
LINKOPTS    += `ppkg-config tclap --libs`

# This big shared object contains the C++ pcad interface, which is the native
# interface.
LIBRARIES   += libpcad.so
CONFIG      += library-sources
CONFIG      += library-headers

###############################################################################
# User-facing binaries
###############################################################################

# Dumps a textual representation of the PCAD IR
BINARIES    += pcad-dump_ir
SOURCES     += dump_ir.c++
CONFIG      += testcases

###############################################################################
# Binaries suitable for scripts
###############################################################################

# Lists the top-level IOs of a circuit.
BINARIES    += pcad-pipe-ports
SOURCES     += pipe-ports.c++
CONFIG      += testcases

# Infers top-level DecoupledIOs from a circuit.
BINARIES    += pcad-pipe-infer_decoupled
SOURCES     += pipe-infer_decoupled.c++
CONFIG      += testcases

# Canonicalizes a Verilog file
BINARIES    += pcad-pipe-to_verilog
SOURCES     += pipe-to_verilog.c++
CONFIG      += testcases
